@{
    ViewBag.Title = "Weather";
}
<h2>@ViewBag.Title.</h2>
<h3>@ViewBag.Message</h3>

<html>
<head>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="~/Scripts/vkBeautify.js"></script>
</head>
<body>
    <pre id="weatherinfo"></pre>

    <script>
        $(function () {
            getWeather();
        });

        function getWeather() {
            $.ajax({
                url: "https://api.worldweatheronline.com/premium/v1/weather.ashx/?q=Singapore&num_of_days=2&key=3a3093ca2ec740eb8af80913202212 ",
                method: "GET",
                datatype: "xml"
            }).done(function (data) {
                //Log it to the console
                console.log(data);

                //Convert XML to String
                var xmlText = new XMLSerializer().serializeToString(data);

                //Format XML into tree structure
                var xmlText = vkbeautify.xml(xmlText);

                //Append text to pre element
                var xmlTextNode = document.createTextNode(xmlText);
                var parentDiv = document.getElementById('weatherinfo');
                parentDiv.appendChild(xmlTextNode);
            }).fail(function (data) {
                var error = document.createElement('p');
                error.innerText = "Error accessing web service";
                var parentDiv = document.getElementById('weatherinfo');
                parentDiv.appendChild(error);
            });
        }        
    </script>

</body>
</html>
